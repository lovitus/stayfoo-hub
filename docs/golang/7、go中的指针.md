# go中的指针

## 指针

`*Dog` 代表 `Dog` 类型的指针类型。

`Dog` 是 `*Dog` 的基本类型。

`*Dog` 的值表示指向它的基本类型 `Dog` 的值的指针。

```
type Dog struct {
	Animal
}
func (p *Dog) Eat() {
	fmt.Println("dog eat")
}

func main() {
	d := &Dog{}
	fmt.Println(*d)
}
```

- 使用取址操作符 `&`，`&Dog{}` 获取节本类型值 `Dog{}` 的指针值。
- 使用取值操作符 `*`, `*d` 获取指针 `d` 指向的基本类型值。

## 指针方法和值方法

方法 `func (p *Dog) Eat()` 就是一个指针方法。方法接收者是指针类型。

方法 `func (p Dog) Run()` 就是一个值方法。方法接收者是值类型（非指针类型）（可能是引用类型切片、字典等）。

```
func (p *Dog) Eat() {
	fmt.Println("dog eat")
}
func (p Dog) Run() {
	fmt.Println("dog eat")
}
```
- 对接收者修改：
    - 值方法的接收者是值的一个副本（该接收者非引用类型），在方法内部修改接收者不会修改原值。
    - 指针方法接收者是指针的一个副本，方法内部修改的是副本指针指向的值，会修改原值。

- 调用：
    - 指针类型的方法集合包括了所有的指针方法和所有的值方法。一个自定义数据类型的方法集合（即值方法集合）中只包含所有值方法。
    - 指针变量不仅可以调用指针方法，也可以调用值方法
    - 值变量不仅可以调用值方法，也可以调用指针方法
。（Go语言会自动使用该值变量的指针调用指针方法）


- 基本类型和它的指针类型的方法集合是不同的，它们具体实现的接口类型的数量也不一定相同。


## 指针的好处

创建一个指针的内存开销，与重新开辟一块内存再把数据复制过来的开销相比，绝大多数情况下少的多。

- Go语言里面没有深拷贝。值类型会被完全复制（比如数组是值类型，浅拷贝就能把所有数据复制过来）。
- 浅拷贝只是拷贝值以及值中直接包含的东西，深拷贝就是把所有深层次的结构一并拷贝。



